webpackJsonp([1],{"+4KJ":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("fZjL"),r=i.n(s),a=i("pFYg"),o=i.n(a),h=i("woOf"),c=i.n(h),u=i("d7EF"),l=i.n(u),d=i("Zx67"),p=i.n(d),m=i("Zrlr"),f=i.n(m),v=i("wxAW"),k=i.n(v),y=i("zwoO"),g=i.n(y),x=i("Pf15"),I=i.n(x),_=function(){function t(){f()(this,t),this.name="Emitter",this._events={}}return k()(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments[2];return this._events[t]||(this._events[t]=[]),this._events[t].push({type:t,callback:e,context:i}),this}},{key:"emit",value:function(t){var e=this._events[t]||null;if(e){var i=0,n=e.length;if(n){for(var s=arguments.length,r=Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];for(;i<n;i++)e[i].callback.apply(e[i].context||this,r)}}}},{key:"off",value:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);-1!==i&&this._events[t].splice(i,1)}}},{key:"clear",value:function(t){t?delete this._events[t]:this._events={}}}]),t}(),T=function(){function t(e){f()(this,t),this.name="TouchEmitter",this.emitter=null,this.element=null,this.isTracing=!1,this.startX=null,this.startY=null,this.moveX=null,this.moveY=null,this.startTime=null,this.moveThreshold=10,this.swipeDirection="",this.isMove=!1,this.element="string"==typeof e?document.querySelector(e):e,this.bindEvents()}return k()(t,[{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.emitter.on(t,e)}},{key:"emit",value:function(t){for(var e,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];(e=this.emitter).emit.apply(e,[t].concat(n))}},{key:"_touchStart",value:function(t){t&&t.preventDefault(),t&&t.stopPropagation();var e=t.touches?t.touches[0]:t;this.startX=e.pageX,this.startY=e.pageY,this.moveX=this.startX,this.moveY=this.startY,this.startTime=Date.now(),this.emitter.emit("touchstart",{startPoint:e,startTime:this.startTime}),this.isMove=!1,this.isTracing=!0}},{key:"_touchMove",value:function(t){if(this.isTracing){t&&t.preventDefault(),t&&t.stopPropagation();var e=t.touches?t.touches[0]:t;this.isMove=!0,Math.abs(e.pageX-this.startX)<this.moveThreshold&&Math.abs(e.pageY-this.startY)<this.moveThreshold||(this.emitter.emit("touchmove",{differenceX:e.pageX-this.startX,differenceY:e.pageY-this.startY,distX:e.pageX-this.moveX,distY:e.pageY-this.moveY,movePoint:e,moveTime:Date.now()}),this.moveX=e.pageX,this.moveY=e.pageY)}}},{key:"_touchEnd",value:function(t){if(this.isTracing){this.isTracing=!1,this.isMove&&(t&&t.preventDefault(),t&&t.stopPropagation());var e=Date.now(),i=t.changedTouches?t.changedTouches[0]:t,n=i.pageX-this.startX,s=i.pageY-this.startY,r=Math.abs(n),a=Math.abs(s);if(r>this.moveThreshold||a>this.moveThreshold){this.swipeDirection=r>=a?n<0?"Left":"Right":s<0?"Up":"Down";var o={swipeDirection:this.swipeDirection,startPoint:{x:this.startX,y:this.startY},endPoint:{x:i.pageX,y:i.pageY},timeCost:e-this.startTime,endTime:e};this.emitter.emit("swipe"+this.swipeDirection,o),this.emitter.emit("swipe",o),this.emitter.emit("touchend",o)}else this.emitter.emit("tap")}}},{key:"_touchCancel",value:function(t){this._touchEnd(t)}},{key:"handleEvent",value:function(t){switch(t.type){case"touchstart":case"mousedown":this._touchStart(t);break;case"touchmove":case"mousemove":this._touchMove(t);break;case"touchend":case"mouseup":case"mouseout":this._touchEnd(t);break;default:console.log("发现未捕获事件")}}},{key:"bindEvents",value:function(){var t=this;if(this.element){var e={touchstart:{capture:!1},touchmove:{capture:!1},touchend:{capture:!0},touchcancel:{capture:!1},mousedown:{capture:!1},mousemove:{capture:!1},mouseup:{capture:!0},mouseout:{capture:!0}};this._touchEvents=e,r()(e).forEach(function(i){t.element.addEventListener(i,t,e[i].capture)}),this.emitter||(this.emitter=new _)}}},{key:"unBindEvents",value:function(){var t=this;this._touchEvents&&r()(this._touchEvents).forEach(function(e){t.element.removeEventListener(e,t,t._touchEvents[e].capture)})}}]),t}(),C={Emitter:_,TouchEmitter:T},M={Linear:function(t,e,i,n){return i*t/n+e},Quad:{easeIn:function(t,e,i,n){return i*(t/=n)*t+e},easeOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOut:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOut:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOut:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}},Expo:{easeIn:function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e},easeOut:function(t,e,i,n){return t==n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOut:function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e}},Circ:{easeIn:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOut:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,i,n,s,r){var a=void 0;return 0==t?e:1==(t/=n)?e+i:(void 0===r&&(r=.3*n),!s||s<Math.abs(i)?(a=r/4,s=i):a=r/(2*Math.PI)*Math.asin(i/s),-s*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r)+e)},easeOut:function(t,e,i,n,s,r){var a=void 0;return 0==t?e:1==(t/=n)?e+i:(void 0===r&&(r=.3*n),!s||s<Math.abs(i)?(s=i,a=r/4):a=r/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/r)+i+e)},easeInOut:function(t,e,i,n,s,r){var a=void 0;return 0==t?e:2==(t/=n/2)?e+i:(void 0===r&&(r=n*(.3*1.5)),!s||s<Math.abs(i)?(s=i,a=r/4):a=r/(2*Math.PI)*Math.asin(i/s),t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r)*-.5+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/r)*.5+i+e)}},Back:{easeIn:function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOut:function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOut:function(t,e,i,n,s){return void 0===s&&(s=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(s*=1.525))*t-s))+e:i/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e}},Bounce:{easeIn:function(t,e,i,n){return i-M.Bounce.easeOut(n-t,0,i,n)+e},easeOut:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,i,n){return t<n/2?.5*M.Bounce.easeIn(2*t,0,i,n)+e:.5*M.Bounce.easeOut(2*t-n,0,i,n)+.5*i+e}}},E=M,b=C.Emitter,P=function(){function t(e){f()(this,t),this.ease=E[e.ease||"Quart"],this.b=e.b||0,this.c=e.c||0,this.d=e.d||0,this.isTransition=!1,this.rAFId=null,this.emitter=new b}return k()(t,[{key:"setOptions",value:function(t){this.isTransition||(this.b=t.b||0,this.c=t.c||0,this.d=t.d||0)}},{key:"start",value:function(){var t=this;if(!this.isTransition){this.isTransition=!0;var e=null;window.requestAnimationFrame(function i(n){e||(e=n);var s=n-e;if(s<=t.d){var r=t.ease.easeOut(s,t.b,t.c,t.d);t.emitter.emit("transition",Math.ceil(r)),t.rAFId=window.requestAnimationFrame(i)}else t.stop()})}}},{key:"stop",value:function(){this.isTransition&&(window.cancelAnimationFrame(this.rAFId),this.isTransition=!1,this.emitter.emit("transitionend"))}}]),t}(),w={TouchInertial:function(t){function e(t,i){f()(this,e);var n=g()(this,(e.__proto__||p()(e)).call(this,t));return n.name="TouchInertial",n.transition=null,n.keyPoints=[],n.direction="y",n.acceleration=9e-4,n.maxSportThreshold=null,n.minSportThreshold=null,n.sportInitValue=null,n.velocityThreshold=.2,n.direction=i.direction||"y",n.acceleration=i.acceleration||9e-4,n.maxSportThreshold=i.maxSportThreshold||null,n.minSportThreshold=i.minSportThreshold||null,n.sportInitValue=i.sportInitValue||null,n._initEvent(),n}return I()(e,t),k()(e,[{key:"_getDistanceAndTime",value:function(t){var i=Math.abs(t*t/(2*this.acceleration)),n=t>0?this.maxSportThreshold:this.minSportThreshold;return e.helpScalar(n,this.acceleration,this.sportInitValue,i,t)}},{key:"_getVelocity",value:function(t){var e=0;return e="x"===this.direction?t.x/t.time:t.y/t.time,Math.abs(e)<=this.velocityThreshold&&(e=0),e=Number(e.toFixed(2))}},{key:"_updateKeyPoints",value:function(t){this.keyPoints.push(t);for(var e=void 0,i=void 0;this.keyPoints.length>0;){if(e=this.keyPoints[this.keyPoints.length-1],i=l()(this.keyPoints,1)[0],!(e.time-i.time>300))break;this.keyPoints.shift()}return{x:e.x-i.x,y:e.y-i.y,time:e.time-i.time}}},{key:"_inertiaMove",value:function(t){var e=this;this.transition?this.transition.setOptions(t):(this.transition=new P(t),this.transition.emitter.on("transition",function(t){e.emit("animationChange",t)}),this.transition.emitter.on("transitionend",function(){e.emit("animationEnd")})),this.transition.start()}},{key:"setOptions",value:function(t){var e=this;r()(t).forEach(function(i){e[i]=t[i]})}},{key:"_initEvent",value:function(){var t=this;this.on("touchstart",function(e){t.transition&&t.transition.stop(),t.keyPoints=[],t._updateKeyPoints({x:e.startPoint.pageX,y:e.startPoint.pageY,time:e.startTime})}),this.on("touchmove",function(e){t._updateKeyPoints({x:e.movePoint.pageX,y:e.movePoint.pageY,time:e.moveTime})}),this.on("touchend",function(e){var i=t._updateKeyPoints({x:e.endPoint.x,y:e.endPoint.y,time:e.endTime});if(i.time>300||0===i.time)t.emit("animationEnd");else{var n=t._getVelocity(i);if(0!==n){t.emit("beforeAnimation",e);var s=t._getDistanceAndTime(n);0!==s.inertiaDistance&&0!==s.inertiaTime?t._inertiaMove({b:t.sportInitValue,c:n>0?s.inertiaDistance:-s.inertiaDistance,d:s.inertiaTime}):t.emit("animationEnd")}else t.emit("animationEnd")}})}},{key:"destroy",value:function(){this.unBindEvents();try{this.emitter.clear(),this.transition&&this.transition.emitter.clear()}catch(t){}}}],[{key:"helpScalar",value:function(t,e,i,n,s){var r=void 0,a=void 0;if(void 0===t||null===t)r=Number(Math.abs(s/e).toFixed(2)),a=Math.floor(n);else{var o=Math.abs(t-i);n>o?(r=Math.abs(o/s),a=o):(r=Math.abs(s/e),a=n),a=Math.ceil(a),r=Number(r.toFixed(2))}return{inertiaDistance:a,inertiaTime:r}}}]),e}(C.TouchEmitter)}.TouchInertial,S={name:"mfw-base-picker",props:{index:{type:Number,default:0},content:{type:Array,default:function(){return[]}},pickerContentListClass:{type:Array,default:function(){return[]}}},data:function(){return{hastransition:!1,translateY:0,maxSportThreshold:null,minSportThreshold:null,picker:null,currentIndex:this.index,oldIndex:this.index,itemHeight:0,ITEMNUMS:5,threshold:80}},computed:{_itemHalfCount:function(){return Math.floor(this.ITEMNUMS/2)}},watch:{index:function(t){this.currentIndex=t,this.setOps()},content:function(){this.setOps()}},methods:{emitChange:function(){var t=this.content[this.currentIndex];this.$emit("change",{index:this.currentIndex,val:"object"===(void 0===t?"undefined":o()(t))?c()({},t):t})},handleEnd:function(){var t=this;try{this.hastransition=!0,this.translateY=Math.min(this.maxSportThreshold,Math.max(this.translateY,this.minSportThreshold));var e=Math.round(this.translateY/this.itemHeight);this.translateY=e*this.itemHeight,this.currentIndex=Math.abs(e-this._itemHalfCount),this.currentIndex!==this.oldIndex&&this.emitChange(),this.oldIndex=this.currentIndex,setTimeout(function(){t.hastransition=!1},200)}catch(t){console.log(t.toString())}},setOps:function(){this.content.length<this.currentIndex+1&&(this.currentIndex=0,this.oldIndex=0),this.emitChange();var t=this.$el.querySelector(".mh-picker__content__item");this.itemHeight=t.getBoundingClientRect().height,this.translateY=(this._itemHalfCount-this.currentIndex)*this.itemHeight,this.maxSportThreshold=this.itemHeight*this._itemHalfCount,this.minSportThreshold=-(this.content.length-this._itemHalfCount-1)*this.itemHeight},bindEvents:function(){var t=this;this.picker=new w(this.$el,{maxSportThreshold:this.maxSportThreshold,minSportThreshold:this.minSportThreshold}),this.picker.on("touchstart",function(){t.hastransition=!1}),this.picker.on("touchmove",function(e){var i=t.translateY+1*e.distY/3;i>=t.minSportThreshold-t.threshold&&i<=t.maxSportThreshold+t.threshold&&(t.translateY=i)}),this.picker.on("beforeAnimation",function(){t.picker.setOptions({sportInitValue:t.translateY,maxSportThreshold:t.maxSportThreshold+t.threshold,minSportThreshold:t.minSportThreshold-t.threshold})}),this.picker.on("animationChange",function(e){t.translateY=e}),this.picker.on("animationEnd",this.handleEnd.bind(this)),this.picker.on("tap",this.handleEnd.bind(this))},init:function(){this.$nextTick(this.setOps.bind(this)),this.bindEvents()}},mounted:function(){this.content.length>0&&this.init()},beforeDestroy:function(){this.picker&&this.picker.destroy(),this.picker=null}},O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mh-picker"},[i("div",{staticClass:"mh-picker__mask"}),t._v(" "),i("div",{staticClass:"mh-picker__indicator"}),t._v(" "),i("div",{staticClass:"mh-picker__content",class:{hastransition:t.hastransition},style:{transform:"translate3d(0px, "+t.translateY+"px, 0px)"}},t._l(t.content,function(e,n){return i("div",{key:n,staticClass:"mh-picker__content__item",class:t.pickerContentListClass.concat([n===t.currentIndex?"mh-picker_item_active":""])},[t._t("default",[t._v(t._s(e))],{item:e})],2)}))])},staticRenderFns:[]};var Y=i("VU/8")(S,O,!1,function(t){i("dR9B")},null,null).exports,A={name:"mfw-picker",props:{cascade:{type:Boolean,default:!1},indexs:{type:Array|String,default:function(){return[]}},data:{type:Array,default:function(){return[]}},columnWidth:{type:Array,default:function(){return[]}},pickerItemClass:{type:Array,default:function(){return[]}},pickerBoxClass:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1}},data:function(){return{EVENT:{CHANGE:"change",HIDE:"hide"},pickerIndex:[],pickerContent:[],pickerValue:[],isSingleCol:!1,showDialog:this.visible,oldPickerIndex:[],oldPickerValue:[]}},computed:{styles:function(){for(var t=[],e=0;e<this.pickerContent.length;e++){var i=void 0;i=this.columnWidth[e]?{width:this.columnWidth[e]}:{flex:1},t.push(i)}return t}},components:{BasePicker:Y},watch:{indexs:function(t){this.initData()},data:function(t){this.initData()},visible:function(t){this.showDialog=t,this.oldPickerIndex=D(this.pickerIndex),this.oldPickerValue=D(this.pickerValue)}},methods:{initData:function(){this.pickerIndex=D(this.indexs),this.isSingleCol=!1,this.cascade?this.getCascadeContents():Array.isArray(this.pickerIndex)&&Array.isArray(this.data[0])?this.pickerContent=D(this.data):(this.isSingleCol=!0,this.pickerIndex=[this.pickerIndex],this.pickerContent=[D(this.data)]),this.updatePickerVal()},getChild:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=[],s=0,r=t.length;s<r;s++){var a=t[s],o=0;n.push(D(a,["children"])),void 0!==this.pickerIndex[i]&&"number"==typeof this.pickerIndex[i]&&(o=this.pickerIndex[i]),a.children&&Array.isArray(a.children)&&a.children.length&&(o>t.length-1&&(o=0),s===o&&this.getChild(a.children,e,i+1))}return e.unshift(n),e},getCascadeContents:function(){var t=this.getChild(this.data);this.pickerContent=t},pickChange:function(t,e){t.index!==this.pickerValue[e].index&&(this.pickerIndex.splice(e,1,t.index),this.cascade?(this.getCascadeContents(),this.updatePickerVal()):this.pickerValue[e]=t)},updatePickerVal:function(){var t=[];if(this.pickerContent.length>0)for(var e=this.pickerContent.length,i=0;i<e;i++){var n=0;this.pickerIndex[i]<this.pickerContent[i].length&&(n=this.pickerIndex[i]),t[i]={index:n,val:this.pickerContent[i][n]}}this.pickerValue=t},dispatch:function(t,e){if(t){var i=e;t===this.EVENT.CHANGE&&this.isSingleCol&&(i=e&&e[0]),this.$emit(t,i)}},handleCancle:function(){this.dispatch(this.EVENT.HIDE),this.pickerIndex=D(this.oldPickerIndex),this.pickerValue=D(this.oldPickerValue)},handleConfirm:function(){this.dispatch(this.EVENT.HIDE),this.dispatch(this.EVENT.CHANGE,this.pickerValue)}},created:function(){this.initData()},mounted:function(){}};function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===t||"object"!==(void 0===t?"undefined":o()(t)))return t;var i=Array.isArray(t)?[]:{};return r()(t).forEach(function(n){-1===e.indexOf(n)&&(i[n]=D(t[n]))}),i}var V={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.showDialog?i("div",{staticClass:"mh-picker-box",class:t.pickerBoxClass},t._l(t.pickerContent,function(e,n){return i("div",{key:n,staticClass:"mh-picker-item",class:t.pickerItemClass,style:t.styles[n]},[i("base-picker",{attrs:{index:t.pickerIndex[n],content:t.pickerContent[n]},on:{change:function(e){t.pickChange(e,n)}},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{item:e.item})]}}])})],1)})):t._e()])},staticRenderFns:[]};var X={name:"App",data:function(){return{showPicker:!0,pickerIndex:2,pickerContent:[],val:""}},components:{Picker:i("VU/8")(A,V,!1,function(t){i("+4KJ")},null,null).exports},created:function(){for(var t=20,e=2e3;t--;)this.pickerContent.push({name:e+++"年"})},methods:{pickChange:function(t){console.log(t),this.val=t}}},H={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Picker",{attrs:{visible:t.showPicker,indexs:t.pickerIndex,data:t.pickerContent},on:{change:t.pickChange},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"itemfz"},[t._v(t._s(e.item.name))])]}}])}),t._v(" "),i("p",[t._v(t._s(t.val))])],1)},staticRenderFns:[]};var N=i("VU/8")(X,H,!1,function(t){i("uidf")},null,null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:N},template:"<App/>"})},dR9B:function(t,e){},uidf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ff166c104ab165043152.js.map